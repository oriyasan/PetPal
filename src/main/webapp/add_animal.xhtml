<ui:composition template="/layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

	<ui:define name="content">
	
		<h2>הוספת חיה חדשה לאימוץ</h2>


		<h:panelGroup rendered="#{not userBean.loggedIn}">
			<h2>גישה נדחתה 🚫</h2>
			<p>עליך להתחבר כדי להשתמש בדף זה.</p>
			<h:link outcome="login" value="לחץ כאן כדי להתחבר"
				styleClass="link-button" />
		</h:panelGroup>

		<h:panelGroup rendered="#{userBean.loggedIn}">
			<div class="form-card">
				<h:form enctype="multipart/form-data">
					<h:messages infoClass="faces-message faces-message-info"
						errorClass="faces-message faces-message-error"
						warnClass="faces-message faces-message-error" globalOnly="true" />

					<h:panelGrid columns="2" styleClass="form-grid"
						columnClasses="label, input">
						<h:outputLabel for="name" value="שם החיה:" />
						<h:inputText id="name" value="#{animalFormBean.animal.name}"
							required="true" requiredMessage="נא למלא שם חיה" />

						<h:outputLabel for="category" value="קטגוריה:" />
						<h:selectOneMenu id="category"
							value="#{animalFormBean.selectedCategoryId}" required="true"
							requiredMessage="נא לבחור קטגוריה">
							<f:selectItem itemLabel="בחר/י קטגוריה" itemValue="#{null}"
								noSelectionOption="true" />
							<f:selectItems value="#{animalFormBean.categories}" var="c"
								itemValue="#{c.id}" itemLabel="#{c.name}" />
						</h:selectOneMenu>

						<h:outputLabel for="gender" value="מין:" />
						<h:selectOneMenu id="gender"
							value="#{animalFormBean.animal.gender}" required="true"
							requiredMessage="נא לבחור מין">
							<f:selectItem itemLabel="בחר/י מין" itemValue=""
								noSelectionOption="true" />
							<f:selectItem itemValue="זכר" itemLabel="זכר" />
							<f:selectItem itemValue="נקבה" itemLabel="נקבה" />
						</h:selectOneMenu>

						<h:outputLabel for="shortDesc" value="תיאור קצר:" />
						<h:inputText id="shortDesc"
							value="#{animalFormBean.animal.shortDescription}" required="true"
							requiredMessage="נא למלא תיאור קצר"
							pt:placeholder="משפט אחד על החיה" />

						<h:outputLabel for="fullDesc" value="תיאור מפורט:" />
						<h:inputTextarea id="fullDesc"
							value="#{animalFormBean.animal.fullDescription}" rows="4" />

						<h:outputLabel for="age" value="גיל (בשנים):" />
						<h:inputText id="age" value="#{animalFormBean.animal.age}"
							required="true" requiredMessage="נא למלא גיל" styleClass="sm">
							<f:convertNumber integerOnly="true" />
							<f:validateLongRange minimum="0" maximum="40" />
						</h:inputText>

						<h:outputLabel for="fileUpload" value="בחר/י תמונה:" />
						<h:inputFile id="fileUpload"
							value="#{animalFormBean.uploadedImage}" />
					</h:panelGrid>

					<div class="form-actions">
						<h:commandButton value="שמור"
							action="#{animalFormBean.saveAnimal}" styleClass="primary-button" />
						<h:link outcome="animals" value="ביטול" styleClass="link-button" />
					</div>
				</h:form>
			</div>
		</h:panelGroup>
	</ui:define>
</ui:composition>
