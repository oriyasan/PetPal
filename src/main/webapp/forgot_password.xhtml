<ui:composition template="/layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core">

	<ui:define name="content">
	
		<h2>שכחתי סיסמה</h2>


		<h:panelGroup rendered="#{not userBean.loggedIn}">
			<h2>גישה נדחתה 🚫</h2>
			<p>עליך להתחבר כדי להשתמש בדף זה.</p>
			<h:link outcome="login" value="לחץ כאן כדי להתחבר"
				styleClass="link-button" />
		</h:panelGroup>

		<h:panelGroup rendered="#{userBean.loggedIn}">

			<h:form id="forgotForm">
				<h:outputLabel for="email" value="אימייל:" />
				<h:inputText id="email" value="#{userBean.resetEmail}"
					required="true" requiredMessage="יש להזין אימייל" />
				<h:message for="email" style="color:red" />

				<br />
				<br />
				<h:commandButton value="אפס סיסמה"
					action="#{userBean.issueTempPassword}" styleClass="primary-button" />
				<br />
				<br />
				<h:messages globalOnly="true" style="color:#444" />
			</h:form>

			<br />
			<h:form>
				<h:commandButton value="חזרה להתחברות" action="login"
					styleClass="primary-button" />
			</h:form>
		</h:panelGroup>
	</ui:define>
</ui:composition>
